/*! cssprettifier-bookmarklet - v0.1.0 - 2013-03-17
* Copyright (c) 2013 Addy Osmani; Licensed MIT */
(function(){"use strict";(function(){function e(e,t){function n(e){return" "===e||"\n"===e||"   "===e||"\r"===e||"\f"===e}function r(e){return"'"===e||'"'===e}function o(e){return g>="a"&&"z">=g||g>="A"&&"Z">=g||g>="0"&&"9">=g||"-_*.:#".indexOf(e)>=0}function a(){var e;for(e=d;e>0;e-=1)w+=s.indent}function i(){w=k(w),A?w+=" {":(w+="\n",a(),w+="{"),"\n"!==u&&(w+="\n"),d+=1}function l(){var e;d-=1,w=k(w),S&&(e=w.charAt(w.length-1),";"!==e&&"{"!==e&&(w+=";")),w+="\n",a(),w+="}",c.push(w),w=""}var s,c,g,u,f,h,p,d,m,y,k,v=0,b=e.length,w="",A=!0,S=!1;for(s=arguments.length>1?t:{},void 0===s.indent&&(s.indent="    "),"string"==typeof s.openbrace&&(A="end-of-line"===s.openbrace),"boolean"==typeof s.autosemicolon&&(S=s.autosemicolon),k=String.prototype.trimRight?function(e){return e.trimRight()}:function(e){return e.replace(/\s+$/,"")},p={Start:0,AtRule:1,Block:2,Selector:3,Ruleset:4,Property:5,Separator:6,Expression:7,URL:8},d=0,h=p.Start,y=!1,c=[],e=e.replace(/\r\n/g,"\n");b>v;)if(g=e.charAt(v),u=e.charAt(v+1),v+=1,r(m))w+=g,g===m&&(m=null),"\\"===g&&u===m&&(w+=u,v+=1);else if(r(g))w+=g,m=g;else if(y)w+=g,"*"===g&&"/"===u&&(y=!1,w+=u,v+=1);else if("/"!==g||"*"!==u){if(h===p.Start){if(0===c.length&&n(g)&&0===w.length)continue;if(" ">=g||g.charCodeAt(0)>=128){h=p.Start,w+=g;continue}if(o(g)||"["===g||"@"===g){if(f=k(w),0===f.length)c.length>0&&(w="\n\n");else if("}"===f.charAt(f.length-1)||";"===f.charAt(f.length-1))w=f+"\n\n";else for(;u=w.charAt(w.length-1)," "===u||9===u.charCodeAt(0);)w=w.substr(0,w.length-1);w+=g,h="@"===g?p.AtRule:p.Selector;continue}}if(h!==p.AtRule)if(h!==p.Block)if(h!==p.Selector)if(h!==p.Ruleset)if(h!==p.Property)if(h!==p.Separator)if(h!==p.Expression)h===p.URL&&")"===g&&w.charAt("\\"!==w.length-1)?(w+=g,h=p.Expression):w+=g;else{if("}"===g){l(),h=p.Start,d>0&&(h=p.Block);continue}if(";"===g){w=k(w),w+=";\n",h=p.Ruleset;continue}if(w+=g,"("===g&&"l"===w.charAt(w.length-2)&&"r"===w.charAt(w.length-3)&&"u"===w.charAt(w.length-4)){h=p.URL;continue}}else{if(!n(g)){w+=g,h=p.Expression;continue}r(u)&&(h=p.Expression)}else{if(":"===g){w=k(w),w+=": ",h=p.Expression,n(u)&&(h=p.Separator);continue}if("}"===g){l(),h=p.Start,d>0&&(h=p.Block);continue}w+=g}else{if("}"===g){l(),h=p.Start,d>0&&(h=p.Block);continue}if("\n"===g){w=k(w),w+="\n";continue}if(!n(g)){w=k(w),w+="\n",a(),w+=g,h=p.Property;continue}w+=g}else{if("{"===g){i(),h=p.Ruleset;continue}if("}"===g){l(),h=p.Start;continue}w+=g}else{if(o(g)){if(f=k(w),0===f.length)c.length>0&&(w="\n\n");else if("}"===f.charAt(f.length-1))w=f+"\n\n";else for(;u=w.charAt(w.length-1)," "===u||9===u.charCodeAt(0);)w=w.substr(0,w.length-1);a(),w+=g,h=p.Selector;continue}if("}"===g){l(),h=p.Start;continue}w+=g}else{if(";"===g){w+=g,h=p.Start;continue}if("{"===g){f=k(w),i(),h="@font-face"===f?p.Ruleset:p.Block;continue}w+=g}}else y=!0,w+=g,w+=u,v+=1;return w=c.join("")+w}"undefined"!=typeof exports?module.exports=exports=e:"object"==typeof window&&(window.cssbeautify=e)})(),function(){var e=/\blang(?:uage)?-(?!\*)(\w+)\b/i,t=self.Prism={util:{type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},clone:function(e){var n=t.util.type(e);switch(n){case"Object":var r={};for(var o in e)e.hasOwnProperty(o)&&(r[o]=t.util.clone(e[o]));return r;case"Array":return e.slice()}return e}},languages:{extend:function(e,n){var r=t.util.clone(t.languages[e]);for(var o in n)r[o]=n[o];return r},insertBefore:function(e,n,r,o){o=o||t.languages;var a=o[e],i={};for(var l in a)if(a.hasOwnProperty(l)){if(l==n)for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);i[l]=a[l]}return o[e]=i},DFS:function(e,n){for(var r in e)n.call(e,r,e[r]),"Object"===t.util.type(e)&&t.languages.DFS(e[r],n)}},highlightAll:function(e,n){for(var r,o=document.querySelectorAll('code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'),a=0;r=o[a++];)t.highlightElement(r,e===!0,n)},highlightElement:function(r,o,a){for(var i,l,s=r;s&&!e.test(s.className);)s=s.parentNode;if(s&&(i=(s.className.match(e)||[,""])[1],l=t.languages[i]),l){r.className=r.className.replace(e,"").replace(/\s+/g," ")+" language-"+i,s=r.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(e,"").replace(/\s+/g," ")+" language-"+i);var c=r.textContent;if(c){c=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g," ");var g={element:r,language:i,grammar:l,code:c};if(t.hooks.run("before-highlight",g),o&&self.Worker){var u=new Worker(t.filename);u.onmessage=function(e){g.highlightedCode=n.stringify(JSON.parse(e.data)),g.element.innerHTML=g.highlightedCode,a&&a.call(g.element),t.hooks.run("after-highlight",g)},u.postMessage(JSON.stringify({language:g.language,code:g.code}))}else g.highlightedCode=t.highlight(g.code,g.grammar),g.element.innerHTML=g.highlightedCode,a&&a.call(r),t.hooks.run("after-highlight",g)}}},highlight:function(e,r){return n.stringify(t.tokenize(e,r))},tokenize:function(e,n){var r=t.Token,o=[e],a=n.rest;if(a){for(var i in a)n[i]=a[i];delete n.rest}e:for(var i in n)if(n.hasOwnProperty(i)&&n[i]){var l=n[i],s=l.inside,c=!!l.lookbehind||0;l=l.pattern||l;for(var g=0;o.length>g;g++){var u=o[g];if(o.length>e.length)break e;if(!(u instanceof r)){l.lastIndex=0;var f=l.exec(u);if(f){c&&(c=f[1].length);var h=f.index-1+c,f=f[0].slice(c),p=f.length,d=h+p,m=u.slice(0,h+1),y=u.slice(d+1),k=[g,1];m&&k.push(m);var v=new r(i,s?t.tokenize(f,s):f);k.push(v),y&&k.push(y),Array.prototype.splice.apply(o,k)}}}}return o},hooks:{all:{},add:function(e,n){var r=t.hooks.all;r[e]=r[e]||[],r[e].push(n)},run:function(e,n){var r=t.hooks.all[e];if(r&&r.length)for(var o,a=0;o=r[a++];)o(n)}}},n=t.Token=function(e,t){this.type=e,this.content=t};if(n.stringify=function(e){if("string"==typeof e)return e;if("[object Array]"==Object.prototype.toString.call(e))return e.map(n.stringify).join("");var r={type:e.type,content:n.stringify(e.content),tag:"span",classes:["token",e.type],attributes:{}};"comment"==r.type&&(r.attributes.spellcheck="true"),t.hooks.run("wrap",r);var o="";for(var a in r.attributes)o+=a+'="'+(r.attributes[a]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+o+">"+r.content+"</"+r.tag+">"},!self.document)return self.addEventListener("message",function(e){var n=JSON.parse(e.data),r=n.language,o=n.code;self.postMessage(JSON.stringify(t.tokenize(o,t.languages[r]))),self.close()},!1),void 0;var r=document.getElementsByTagName("script");r=r[r.length-1],r&&(t.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&document.addEventListener("DOMContentLoaded",t.highlightAll))}(),Prism.languages.css={comment:/\/\*[\w\W]*?\*\//g,atrule:/@[\w-]+?(\s+[^;{]+)?(?=\s*{|\s*;)/gi,url:/url\((["']?).*?\1\)/gi,selector:/[^\{\}\s][^\{\}]*(?=\s*\{)/g,property:/(\b|\B)[a-z-]+(?=\s*:)/gi,string:/("|')(\\?.)*?\1/g,important:/\B!important\b/gi,ignore:/&(lt|gt|amp);/gi,punctuation:/[\{\};:]/g},Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{style:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)[\w\W]*?(&lt;|<)\/style(>|&gt;)/gi,inside:{tag:{pattern:/(&lt;|<)style[\w\W]*?(>|&gt;)|(&lt;|<)\/style(>|&gt;)/gi,inside:Prism.languages.markup.tag.inside},rest:Prism.languages.css}}});var e=document.createElement("style"),t=cssbeautify(document.body.textContent,{autosemicolon:!0}),n=Prism.highlight(t,Prism.languages.css);e.textContent='code[class*="language-"],pre[class*="language-"]{color:black;text-shadow:0 1px white;font-family:Consolas,Monaco,\'Andale Mono\',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}@media print{code[class*="language-"],pre[class*="language-"]{text-shadow:none;}}pre[class*="language-"]{padding:1em;margin:.5em 0;overflow:auto;}:not(pre) > code[class*="language-"],pre[class*="language-"]{background:#f5f2f0;}:not(pre) > code[class*="language-"]{padding:.1em;border-radius:.3em;}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:slategray;}.token.punctuation{color:#999;}.namespace{opacity:.7;}.token.property,.token.tag,.token.boolean,.token.number{color:#905;}.token.selector,.token.attr-name,.token.string{color:#690;}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5);}.token.atrule,.token.attr-value,.token.keyword{color:#07a;}.token.regex,.token.important{color:#e90;}.token.important{font-weight:bold;}.token.entity{cursor:help;}',document.head.innerHTML="",document.head.appendChild(e),document.body.innerHTML="<code><pre>"+n+"</pre></code>"})();